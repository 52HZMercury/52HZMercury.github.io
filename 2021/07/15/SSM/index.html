

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/moon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Mercury">
  <meta name="keywords" content="">
  
    <meta name="description" content="主流框架Spring，SpringMVC以及Mybatis">
<meta property="og:type" content="article">
<meta property="og:title" content="SSM">
<meta property="og:url" content="http://example.com/2021/07/15/SSM/index.html">
<meta property="og:site_name" content="Mercury&#39;s blog">
<meta property="og:description" content="主流框架Spring，SpringMVC以及Mybatis">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/52HZMercury/img/blog/1649235483225.jpg">
<meta property="article:published_time" content="2021-07-15T12:16:20.000Z">
<meta property="article:modified_time" content="2024-03-25T08:38:05.644Z">
<meta property="article:author" content="Mercury">
<meta property="article:tag" content="spring">
<meta property="article:tag" content="mybatis">
<meta property="article:tag" content="springMVC">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/52HZMercury/img/blog/1649235483225.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>SSM - Mercury&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.0","typing":{"enable":true,"typeSpeed":90,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/newloading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Mercury</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/Post%20Page.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="SSM"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-07-15 20:16" pubdate>
          2021年7月15日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          21k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          68 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">SSM</h1>
            
            <div class="markdown-body">
              
              <p>(<strong>写在开头：本文主要依据黑马程序员SSM框架教程PPT资料编写</strong>)</p>
<h1 id="一、Spring"><a href="#一、Spring" class="headerlink" title="一、Spring"></a>一、Spring</h1><h2 id="Spring的基本概念"><a href="#Spring的基本概念" class="headerlink" title="Spring的基本概念"></a>Spring的基本概念</h2><p>   loC  反转控制<br>    AOP 面向切面编程</p>
<h2 id="Spring的快速入门"><a href="#Spring的快速入门" class="headerlink" title="Spring的快速入门"></a>Spring的快速入门</h2><p><img src="https://img-blog.csdnimg.cn/20210715110221230.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<h3 id="spring的基本开发步骤"><a href="#spring的基本开发步骤" class="headerlink" title="spring的基本开发步骤"></a>spring的基本开发步骤</h3><p>   1.导入Spring开发的基本包坐标</p>
<p>   2.编写Dao接口和实现类</p>
<p>   3.创建Spring核心配置文件</p>
<p>   4.在Spring配置文件中配置UserDaoImpl</p>
<p>   5.使用Spring的API获得Bean实例</p>
<p>&#8195;<strong>快速入门步骤</strong></p>
<p>   1.导入坐标</p>
<p>   2.创建Bean</p>
<p>   3.创建applicationContext.xml</p>
<p>   4.在配置文件中进行配置</p>
<p>   5.创建ApplicationContext对象getBean</p>
<h2 id="Spring配置文件"><a href="#Spring配置文件" class="headerlink" title="Spring配置文件"></a>Spring配置文件</h2><h3 id="Bean标签的配置"><a href="#Bean标签的配置" class="headerlink" title="Bean标签的配置"></a>Bean标签的配置</h3><p>   &#8195;用于配置对象交由Soring来创建默认的情况下他会调用类中的无参构造函数，如果没有无参构造则不能创建成功</p>
<h4 id="Bean标签的基本属性"><a href="#Bean标签的基本属性" class="headerlink" title="Bean标签的基本属性"></a>Bean标签的基本属性</h4><p>   id :Bean实例在Spring容器中的唯一标识<br>      class:Bean的全限定名称 </p>
<p>&#8195;<strong>Bean标签的范围取值</strong></p>
<p> &#8195;scope：指对象的做哟ing范围，取值如下</p>
<p><img src="https://img-blog.csdnimg.cn/20210715110307817.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p><em><strong>scope的取值为singleton时</strong></em></p>
<p>   Bean的实例化个数：1个</p>
<p>   Bean的实例化时机：当Spring核心文件被加载时，实例化配置的Bean实例</p>
<p>   Bean的生命周期：</p>
<p>   &#8195; 对象创建：当应用加载，创建容器时，对象就被创建了</p>
<p>   &#8195;对象运行：只要容器在，对象就就一直活着</p>
<p>   &#8195;    对象销毁：当应用卸载，销毁容器时，对象就被销毁了</p>
<p><em><strong>scope的取值为prototype</strong></em></p>
<p>Bean的实例化个数：多个</p>
<p>   Bean的实例化时机：当调用getBean()方法时实例化Bean</p>
<p>   Bean的生命周期：</p>
<p>  &#8195; 对象创建：当使用对象时，创建新的对象实例</p>
<p>   &#8195;对象运行：只要对对象在使用中，对象就就一直活着</p>
<p>   &#8195;对象销毁：当对象长时间不用时，杯Java的垃圾回收器回收了</p>
<h4 id="Bean的生命周期配置"><a href="#Bean的生命周期配置" class="headerlink" title="Bean的生命周期配置"></a>Bean的生命周期配置</h4><p>   init-method:指定类中的初始化方法名称</p>
<p>   destroy-method:指定类中的销毁方法</p>
<h4 id="Bean实例化三种方式"><a href="#Bean实例化三种方式" class="headerlink" title="Bean实例化三种方式"></a>Bean实例化三种方式</h4><ul>
<li>无参构造方法实例化</li>
<li>工厂静态方法实例化</li>
<li>工厂实例方法实例化</li>
</ul>
<br>

<p>例：工厂实例方法实例化<br><img src="https://img-blog.csdnimg.cn/20210715110940785.png" srcset="/img/newloading.gif" lazyload></p>
<br>

<h4 id="Bean的依赖注入"><a href="#Bean的依赖注入" class="headerlink" title="Bean的依赖注入"></a>Bean的依赖注入</h4><p><img src="https://img-blog.csdnimg.cn/20210716163040737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/20210716163156941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p><em><strong>依赖注入的具体分析</strong></em></p>
<p>依赖注入 (Denpendency Injection):它是Spring框架核心IOC的具体实现。</p>
<p>在编写程序时，通过控制反转，把对象的创建交给了Spring，但是代码中不可能出现没有依赖的情况。IOC解耦知识降低他们的依赖的关系，但是并不会消除。例如：业务层任然会调用持久层的方法。</p>
<p>那这种业务层和持久层的依赖关系，在使用Spring之后，就让Spring来维护了。简单的说，就是坐等框架把持久层的对象储如业务层，而不用我们自己去获取。</p>
<h4 id="依赖注入的方式"><a href="#依赖注入的方式" class="headerlink" title="依赖注入的方式"></a>依赖注入的方式</h4><p>思考：怎样将UserDao植入到UserService内部呢？</p>
<ul>
<li>构造方法</li>
<li>set方法</li>
</ul>
<p><em><strong>1.set方法的注入</strong></em></p>
<p>&#8195;<em>普通的set方法注入</em><br><img src="https://img-blog.csdnimg.cn/20210716163400924.png" srcset="/img/newloading.gif" lazyload><br>&#8195;<em>P命名空间的注入</em></p>
<p>P命名空间注入本质也是set方法注入，但比set方法的注入更加的方便，主要体现在配置文件中<br><img src="https://img-blog.csdnimg.cn/20210716163529146.png" srcset="/img/newloading.gif" lazyload><br>修改注入方式<br><img src="https://img-blog.csdnimg.cn/20210716163547251.png" srcset="/img/newloading.gif" lazyload><br><em><strong>2.构造注入</strong></em><br><img src="https://img-blog.csdnimg.cn/20210716163921155.png" srcset="/img/newloading.gif" lazyload></p>
<h4 id="Bean的依赖注入的数据类型"><a href="#Bean的依赖注入的数据类型" class="headerlink" title="Bean的依赖注入的数据类型"></a>Bean的依赖注入的数据类型</h4><p>除了对象的引用可以注入，普通的数据类型，集合等都可以在容器中进行注入</p>
<p>注入数据发的三种数据类型</p>
<ul>
<li><p>普通数据类型</p>
</li>
<li><p>引用数据类型</p>
</li>
<li><p>集合数据类型</p>
</li>
</ul>
<p><strong>引用其他配置文件（分模块开发）</strong></p>
<p>实际的开发中，Spring的配置内容非常多，这就导致Spring配置之很繁杂且体积很大，所以，可以将部分配置拆解到其他的配置文件中，而在Spring主配置文件通过impor标签进行加载<br><img src="https://img-blog.csdnimg.cn/20210716164427970.png" srcset="/img/newloading.gif" lazyload></p>
<h2 id="Spring相关的API"><a href="#Spring相关的API" class="headerlink" title="Spring相关的API"></a>Spring相关的API</h2><h3 id="ApplicationContext的继承体系"><a href="#ApplicationContext的继承体系" class="headerlink" title="ApplicationContext的继承体系"></a>ApplicationContext的继承体系</h3><p><strong>applicationContext</strong>:接口类型，代表应用上下文，可以通过其实例获得Spring容器中的Bean对象</p>
<p><strong>ApplicationContext的实现类</strong></p>
<ul>
<li>ClassPathXmlApplicationContext</li>
</ul>
<p> 他是从类根路径下加载配置文件 （推荐使用）</p>
<ul>
<li>FileSystemXmlApplicationContext</li>
</ul>
<p>他是从磁盘路径上加载配置文件，配置文件可以在磁盘的任意位置。</p>
<ul>
<li>AnnotationConfigApplicationContext</li>
</ul>
<p>使用注解配置容器对象时，需要使用此类来创建Spring容器。它用来读取注解。</p>
<p><strong>getBean可以通过多种方式进行获取</strong></p>
<p>app.getBean(“id”)  &#8195;  根据id获取 唯一的</p>
<p>app.getBean(class) &#8195; 根据类型获取 不一定唯一</p>
<h2 id="Spring配置数据源"><a href="#Spring配置数据源" class="headerlink" title="Spring配置数据源"></a>Spring配置数据源</h2><p><strong>数据源（连接池）的作用</strong></p>
<p>数据源是为了提高程序性能出现的；实现实例化数据源，初始化部分连接资源；使用连接资源时从数据源中获取；使用我完毕后将连接资源归还给数据源</p>
<p><strong>常见的数据源（连接池）</strong>：DBCP，C3P0,BoneCP,Druid等<br><br><strong>数据源的开发步骤</strong></p>
<ul>
<li><p>导入数据源的坐标和数据库驱动坐标</p>
</li>
<li><p>创建数据源对象</p>
</li>
<li><p>设置数据源的基本连接数据</p>
</li>
<li><p>使用数据源获取连接资源和归还连接资源</p>
<br>
 **1. 手动创建c3p0数据源**</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/img_convert/9381de845982cb2ac651c3353ef22dd0.png" srcset="/img/newloading.gif" lazyload></p>
<p>   <strong>2.手动创建Druid数据源</strong><br><img src="https://img-blog.csdnimg.cn/img_convert/a1bcf31bc1ab7ba8abafa2528e0d1951.png" srcset="/img/newloading.gif" lazyload></p>
<p><strong>3.从配置文件中获取</strong></p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/42c04d69ba553bbf33c3b07d3a28c684.png" srcset="/img/newloading.gif" lazyload></p>
<p><strong>由Spring配置数据源</strong></p>
<p>可以将DataSource的创建权交由Spring容器去完成</p>
<ol>
<li>配置Bean<br><img src="https://img-blog.csdnimg.cn/img_convert/84395faaa2296c0d51e2d33be346b021.png" srcset="/img/newloading.gif" lazyload></li>
<li>Spring容器产生数据源对象<br><img src="https://img-blog.csdnimg.cn/img_convert/2522a1e673a6c4da03e99945bff3c071.png" srcset="/img/newloading.gif" lazyload></li>
</ol>
<p><strong>注意：</strong> c3p0和druid的bean配置时 他们的需要注入的driver，url等的名字不同，主要取决于他们内部对应的set方法不同，需要注入的名字就是set后面对应的名字</p>
<p><strong>由spring中加载properties配置文件</strong></p>
<ol>
<li>首先需要映入context命名空间和约束路径</li>
</ol>
<p>命名空间复制xmlns，在xmlns后面加上:context，最后将bean全部改为context，最后即是</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/d20e8074e7909fdf2be0bcae03fb976a.png" srcset="/img/newloading.gif" lazyload></p>
<ol start="2">
<li>同理约束路径为<br><img src="https://img-blog.csdnimg.cn/img_convert/39a355e6685efdfc9d5202067d487241.png" srcset="/img/newloading.gif" lazyload></li>
<li>加载外部的properties文件</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/img_convert/ca3725cbded1fb476ed14d295cd98eea.png" srcset="/img/newloading.gif" lazyload></p>
<p>location即是文件的位置</p>
<p>使用EL表达式将properties中的数据传入bean</p>
<p>即  ${key}<br><img src="https://img-blog.csdnimg.cn/img_convert/ce28593edac8bb48ed51ca647ccfceca.png" srcset="/img/newloading.gif" lazyload></p>
<ol start="4">
<li>最后同上</li>
</ol>
<h2 id="Spring注解开发"><a href="#Spring注解开发" class="headerlink" title="Spring注解开发"></a>Spring注解开发</h2><p><strong>Spring的原始注解</strong></p>
<p>spring是轻代码而重配置的框架，配置比较繁重，影响开发效率，所以注解开发是一种趋势，注解代替xml配置文件可以简化配置，提高开发效率。</p>
<p>spring的原始注解主要是替代Bean的配置<br><img src="https://img-blog.csdnimg.cn/img_convert/5957bde0abc9d48e9dd1644c7d523f1b.png" srcset="/img/newloading.gif" lazyload><br>注意：使用注解进行开发时，，需要applicationContext.xml中配置组件扫描，作用时指定哪个包及其子包下需要进行扫描以便识别使用注解配置的类，字段和方法</p>
<p><img src="https://img-blog.csdnimg.cn/71ea7f70fea148c5b7d74e137ce54359.png" srcset="/img/newloading.gif" lazyload></p>
<p>@Value注解</p>
<p>配合这个表达式使用<br><img src="https://img-blog.csdnimg.cn/53e3f6c76710459998f8cedff5a48a67.png" srcset="/img/newloading.gif" lazyload></p>
<p>spring的新注解</p>
<p><img src="https://img-blog.csdnimg.cn/a487b7aac6fc44839b9fd50ce80675c3.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p>具体实现<br>配置数据源</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-comment">//说明这是一个核心配置文件</span><br><span class="hljs-meta">@ComponentScan(&quot;com.itheima&quot;)</span><br><span class="hljs-comment">//扫描组件对应着xml中的 &lt;context:component-scan base-package=&quot;com.itheima&quot;&gt;</span><br><span class="hljs-meta">@PropertySource(&quot;classpath:jdbc.properties&quot;)</span>;<br><span class="hljs-comment">//从properties文件中获取那些数据 对应着xml中的 &lt;context:property-placeholder location=&quot;classpath:jdbc.properties&quot;/&gt;</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SpringConfiguration</span> </span>&#123;<br>    <span class="hljs-comment">//使用@Value注入值</span><br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String driver;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String url;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> DataSource <span class="hljs-title">getDataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> PropertyVetoException</span>&#123;<br>        ComboPooledDataSource dataSource = <span class="hljs-keyword">new</span> ComboPooledDataSource;<br>        dataSource.setDriverclass(driver);<br>        dataSource.setJdbcUrl(url);<br>        dataSource.setUser(username);<br>        dataSource.setPassword(password);<br>        <span class="hljs-keyword">return</span> dataSource;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="Spring集成Junit"><a href="#Spring集成Junit" class="headerlink" title="Spring集成Junit"></a>Spring集成Junit</h2><p><strong>步骤</strong></p>
<ol>
<li>导入spring集成junit的jar包</li>
<li>使用@Runwith注解替换原来的运行期</li>
<li>使用@ContextConfiguration指定配置文件或配置类</li>
<li>使用@Autowired注入需要测试的对象</li>
<li>创建测试方法进行测试</li>
</ol>
<h2 id="Spring与Web环境的集成"><a href="#Spring与Web环境的集成" class="headerlink" title="Spring与Web环境的集成"></a>Spring与Web环境的集成</h2><ul>
<li><strong>ApplicationContext应用上下文获取方式</strong></li>
</ul>
<p>应用上下文对象是通过new ClasspathXmlApplicationContext (spring配置文件)方式获取的，但是每次从容器中获得Bean时都要编写new ClasspathXmlApplicationContext (spring配置文件)，这样的弊端是配置的时候文件加载多次，应用上下文对象创建多次。</p>
<p>在Web项目中可以使用ServletContextListener监听Web应用的启动，我们可以在Web应用启动时，就加载Spring的配置文件，创建应用上下文对象ApplicationContext，在将其存储到最大的域servletContext域中，这样就可以在任意位置从域中获得上下文对象ApplicationContext对象了。</p>
<p><strong>spring提供获取应用上下文的工具</strong></p>
<p>Spring提供了一个监听器ContextLoaderListener就是对方法的封装，该监听器内部加载Spring配置文件，创建应用上下文对象，并存储到ServletContext域中，提供了一个客户端工具WebApplicationContextUtils供使用者获取应用上下文对象。</p>
<p>所以我们只需要只有两件事</p>
<ol>
<li>在Web.XML中配置ContextLoaderListener监听器（导入spring-web坐标）<br><img src="https://img-blog.csdnimg.cn/2e6b4d9b96df40978c503155b3f7a67a.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload>  </li>
<li>使用WebApplicationContextUtils获得上下文对象ApplicationContext<br><img src="https://img-blog.csdnimg.cn/e824d22c24f645fb90e40f540815a4b8.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
</ol>
<h1 id="二、SpringMVC"><a href="#二、SpringMVC" class="headerlink" title="二、SpringMVC"></a>二、SpringMVC</h1><h2 id="SpringMVC的简介"><a href="#SpringMVC的简介" class="headerlink" title="SpringMVC的简介"></a>SpringMVC的简介</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>SpringMVC是一种基于Java的实现MVC设计模型的请求驱动类型的轻量级Web框架，属于SpringFrameWork的后续产品，已经融合在Spring Web Flow中</p>
<h3 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h3><ol>
<li>导入SpringMVC的相关坐标</li>
<li>配置SpringMVC核心控制器DispathcerServlet</li>
<li>创建Controller类和视图页面</li>
<li>使用注解配置Controller类中业务方法得到映射地址</li>
<li>配置SpringMVC核心文件Spring-mvc.xml</li>
<li>客户端发起请求测试</li>
<li>SpringMVC的执行流程</li>
</ol>
<p>图示<br><img src="https://img-blog.csdnimg.cn/e71e4fe33bb5416b9b9f0dbc5d8f3699.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p>文字</p>
<p><img src="https://img-blog.csdnimg.cn/4b7f8a4b052e4925a6590d9bac756dc1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<h2 id="SpringMVC注解解析"><a href="#SpringMVC注解解析" class="headerlink" title="SpringMVC注解解析"></a>SpringMVC注解解析</h2><h3 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h3><p>作用：用于建立请求 URL 和处理请求方法之间的对应关系<br>位置：<br>类上，请求URL 的第一级访问目录。此处不写的话，就相当于应用的根目录<br>方法上，请求 URL 的第二级访问目录，与类上的使用@ReqquestMapping标注的一级目录一起组成访问虚拟路径<br>属性：<br>value：用于指定请求的URL。它和path属性的作用是一样的<br>method：用于指定请求的方式<br>params：用于指定限制请求参数的条件。它支持简单的表达式。要求请求参数的key和value必须和配置的一模一样<br>例如：<br>params = {“accountName”}，表示请求参数必须有accountName<br>params = {“moeny!100”}，表示请求参数中money不能是100</p>
<h3 id="mvc命名空间引入"><a href="#mvc命名空间引入" class="headerlink" title="mvc命名空间引入"></a>mvc命名空间引入</h3><p>命名空间：xmlns:context=”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context&quot;">http://www.springframework.org/schema/context&quot;</a><br>                xmlns:mvc=”<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/mvc&quot;">http://www.springframework.org/schema/mvc&quot;</a><br>约束地址：<a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a><br>         <a target="_blank" rel="noopener" href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a><br>         <a target="_blank" rel="noopener" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a><br>         <a target="_blank" rel="noopener" href="http://www.springframework.org/schema/mvc/spring-mvc.xsd">http://www.springframework.org/schema/mvc/spring-mvc.xsd</a></p>
<h3 id="组件扫描"><a href="#组件扫描" class="headerlink" title="组件扫描"></a>组件扫描</h3><p>SpringMVC基于Spring容器，所以在进行SpringMVC操作时，需要将Controller存储到Spring容器中，如果使用@Controller注解标注的话，就需要使用&lt;context:component-scan base-package=“com.itheima.controller”/&gt;进行组件扫描。</p>
<h2 id="SpringMVC的XML配置解析"><a href="#SpringMVC的XML配置解析" class="headerlink" title="SpringMVC的XML配置解析"></a>SpringMVC的XML配置解析</h2><h3 id="视图解析器"><a href="#视图解析器" class="headerlink" title="视图解析器"></a>视图解析器</h3><p>SpringMVC有默认组件配置，默认组件都是DispatcherServlet.properties配置文件中配置的，该配置文件地址org/springframework/web/servlet/DispatcherServlet.properties，该文件中配置了默认的视图解析器，如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">org.springframework.web.servlet.ViewResolver=org.springframework.web.servlet.view.InternalResourceViewResolver<br></code></pre></td></tr></table></figure>
<p><strong>我们可以通过属性注入的方式修改视图的的前后缀</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--配置内部资源视图解析器--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;prefix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;/WEB-INF/views/&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;suffix&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;.jsp&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="SpringMVC的相关组件"><a href="#SpringMVC的相关组件" class="headerlink" title="SpringMVC的相关组件"></a>SpringMVC的相关组件</h3><p>前端控制器：DispatcherServlet<br>处理器映射器：HandlerMapping<br>处理器适配器：HandlerAdapter<br>处理器：Handler<br>视图解析器：View Resolver<br>视图：View</p>
<h3 id="SpringMVC的注解和配置"><a href="#SpringMVC的注解和配置" class="headerlink" title="SpringMVC的注解和配置"></a>SpringMVC的注解和配置</h3><p>请求映射注解：@RequestMapping<br>视图解析器配置：<br>REDIRECT_URL_PREFIX = “redirect:”<br>FORWARD_URL_PREFIX = “forward:”<br>prefix = “”;<br>suffix = “”;     </p>
<h2 id="SpringMVC的数据响应方式"><a href="#SpringMVC的数据响应方式" class="headerlink" title="SpringMVC的数据响应方式"></a>SpringMVC的数据响应方式</h2><p>1） <strong>页面跳转</strong><br>直接返回字符串<br>通过ModelAndView对象返回</p>
<p>2） <strong>回写数据</strong><br>直接返回字符串<br>返回对象或集合</p>
<h3 id="页面跳转"><a href="#页面跳转" class="headerlink" title="页面跳转"></a>页面跳转</h3><ul>
<li>返回字符串形式<br>直接返回字符串：此种方式会将返回的字符串与视图解析器的前后缀拼接后跳转<br> <img src="https://img-blog.csdnimg.cn/be374d1b7dcb441f90a70f371f60ae2e.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
<li>返回ModelAndView对象<br><img src="https://img-blog.csdnimg.cn/eab5373039c2447eac88438b6fc40842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
<li>向request域存储数据<br>A. 通过SpringMVC框架注入的request对象setAttribute()方法设置<br><img src="https://img-blog.csdnimg.cn/dce87c613dc8412b8b85f15c92e06f8f.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>B.通过ModelAndView的addObject()方法设置<br><img src="https://img-blog.csdnimg.cn/8b63ba7c31734f7886b47f97db6b64f4.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="回写数据"><a href="#回写数据" class="headerlink" title="回写数据"></a>回写数据</h3></li>
</ul>
<p>  <strong>1.直接返回字符串</strong></p>
<p> 通过SpringMVC框架注入的response对象，使用response.getWriter().print(“hello world”) 回写数据，此时不需要视图跳转，业务方法返回值为void。<br><img src="https://img-blog.csdnimg.cn/e2d553be6a8d481f972793b4dbfe35c0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p>将需要回写的字符串直接返回，但此时需要通过@ResponseBody注解告知SpringMVC框架，方法返回的字符串不是跳转是直接在http响应体中返回。<br><img src="https://img-blog.csdnimg.cn/990d89710ee643a7b924bfa2fab47c91.png" srcset="/img/newloading.gif" lazyload><br>在异步项目中，客户端与服务器端往往要进行json格式字符串交互，此时我们可以手动拼接json字符串返回。<br><img src="https://img-blog.csdnimg.cn/88ea71aa891147b2a853a40a48ae8262.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>上述方式手动拼接json格式字符串的方式很麻烦，开发中往往要将复杂的java对象转换成json格式的字符串，我们可以使用web阶段学习过的json转换工具jackson进行转换，导入jackson坐标。<br><img src="https://img-blog.csdnimg.cn/3f9d0aa65d8441a9aaa29825b41ddb14.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br><strong>2. 返回对象或集合</strong><br>通过SpringMVC帮助我们对对象或集合进行json字符串的转换并回写，为处理器适配器配置消息转换参数，指定使用jackson进行对象或集合的转换，因此需要在spring-mvc.xml中进行如下配置：<br><img src="https://img-blog.csdnimg.cn/593bf875e50b45f9bb557a4ce3b7a872.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/9956fb64155548f8981fe20039258187.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>在方法上添加@ResponseBody就可以返回json格式的字符串，但是这样配置比较麻烦，配置的代码比较多，因此，我们可以使用mvc的注解驱动代替上述配置。<br><img src="https://img-blog.csdnimg.cn/eb69021d1d1b46ee941c79ad4e2a2d70.png" srcset="/img/newloading.gif" lazyload><br>在 SpringMVC 的各个组件中，处理器映射器、处理器适配器、视图解析器称为 SpringMVC 的三大组件。<br>使用<a href="mvc:annotation-driven">mvc:annotation-driven</a>自动加载 RequestMappingHandlerMapping（处理映射器）和<br>RequestMappingHandlerAdapter（ 处 理 适 配 器 ），可用在Spring-xml.xml配置文件中使用<br><a href="mvc:annotation-driven">mvc:annotation-driven</a>替代注解处理器和适配器的配置。<br>同时使用<a href="mvc:annotation-driven">mvc:annotation-driven</a>默认底层就会集成jackson进行对象或集合的json格式字符串的转换。</p>
<h2 id="SpringMVC-获得请求数据"><a href="#SpringMVC-获得请求数据" class="headerlink" title="SpringMVC 获得请求数据"></a>SpringMVC 获得请求数据</h2><h3 id="获得请求参数"><a href="#获得请求参数" class="headerlink" title="获得请求参数"></a>获得请求参数</h3><p>客户端请求参数的格式是：name=value&amp;name=value… …<br>服务器端要获得请求的参数，有时还需要进行数据的封装，SpringMVC可以接收如下类型的参数：</p>
<ul>
<li>基本类型参数</li>
<li>POJO类型参数</li>
<li>数组类型参数</li>
<li>集合类型参数<h3 id="获得基本类型参数"><a href="#获得基本类型参数" class="headerlink" title="获得基本类型参数"></a>获得基本类型参数</h3>Controller中的业务方法的参数名称要与请求参数的name一致，参数值会自动映射匹配。<br><img src="https://img-blog.csdnimg.cn/f3e2dceb0e614ad18459d6d3e9147a0a.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="获得POJO类型参数"><a href="#获得POJO类型参数" class="headerlink" title="获得POJO类型参数"></a>获得POJO类型参数</h3>Controller中的业务方法的POJO参数的属性名与请求参数的name一致，参数值会自动映射匹配。<br><img src="https://img-blog.csdnimg.cn/515d88889369428abaa127a60545fcba.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="获得数组类型参数"><a href="#获得数组类型参数" class="headerlink" title="获得数组类型参数"></a>获得数组类型参数</h3>Controller中的业务方法数组名称与请求参数的name一致，参数值会自动映射匹配。<br><img src="https://img-blog.csdnimg.cn/262a22f5610243d08f53d972096f3808.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="获得集合类型参数"><a href="#获得集合类型参数" class="headerlink" title="获得集合类型参数"></a>获得集合类型参数</h3>获得集合参数时，要将集合参数包装到一个POJO中才可以。<br><img src="https://img-blog.csdnimg.cn/15f78bd1a573482ba08dc9d27e4106f9.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>当使用ajax提交时，可以指定contentType为json形式，那么在方法参数位置使用@RequestBody可以直接接收集合数据而无需使用POJO进行包装。<br><img src="https://img-blog.csdnimg.cn/cbfc5ec4c0994e6a808f403866a60fc8.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload alt="1"><br><img src="https://img-blog.csdnimg.cn/c947e3a269f14848acd5288349eacbeb.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload alt="2"><br>注意：通过谷歌开发者工具抓包发现，没有加载到jquery文件，原因是SpringMVC的前端控制器DispatcherServlet的url-pattern配置的是/,代表对所有的资源都进行过滤操作，我们可以通过以下两种方式指定放行静态资源：<br>在spring-mvc.xml配置文件中指定放行的资源<br>  &lt;mvc:resources mapping=”/js/**” location=”/js/“/&gt;<br>使用<a href="mvc:default-servlet-handler/">mvc:default-servlet-handler/</a>标签<h3 id="请求数据乱码问题"><a href="#请求数据乱码问题" class="headerlink" title="请求数据乱码问题"></a>请求数据乱码问题</h3>当post请求时，数据会出现乱码，我们可以设置一个过滤器来进行编码的过滤。<br><img src="https://img-blog.csdnimg.cn/432424ab457d413282e2b8ad61f180d6.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="参数绑定注解-requestParam"><a href="#参数绑定注解-requestParam" class="headerlink" title="参数绑定注解@requestParam"></a>参数绑定注解@requestParam</h3>当请求的参数名称与Controller的业务方法参数名称不一致时，就需要通过@RequestParam注解显示的绑定。<br><img src="https://img-blog.csdnimg.cn/cdb0140cbb15486982ed9a8867fec7ca.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>注解@RequestParam还有如下参数可以使用：</li>
<li>value：与请求参数名称</li>
<li>required：此在指定的请求参数是否必须包括，默认是true，提交时如果没有此参数则报错</li>
<li>defaultValue：当没有指定请求参数时，则使用指定的默认值赋值<br><img src="https://img-blog.csdnimg.cn/85018fd17ca24dd896679ba413594e44.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="获得Restful风格的参数"><a href="#获得Restful风格的参数" class="headerlink" title="获得Restful风格的参数"></a>获得Restful风格的参数</h3>Restful是一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。主要用于客户端和服务器交互类的软件，基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存机制等。</li>
</ul>
<p>Restful风格的请求是使用“url+请求方式”表示一次请求目的的，HTTP 协议里面四个表示操作方式的动词如下：<br>GET：用于获取资源<br>POST：用于新建资源<br>PUT：用于更新资源<br>DELETE：用于删除资源  </p>
<p>例如：</p>
<ul>
<li>/user/1    GET ：       得到 id = 1 的 user</li>
<li>/user/1    DELETE：  删除 id = 1 的 user</li>
<li>/user/1    PUT：       更新 id = 1 的 user</li>
<li>/user       POST：      新增 user</li>
</ul>
<p>上述url地址/user/1中的1就是要获得的请求参数，在SpringMVC中可以使用占位符进行参数绑定。地址/user/1可以写成/user/{id}，占位符{id}对应的就是1的值。在业务方法中我们可以使用@PathVariable注解进行占位符的匹配获取工作。<br><img src="https://img-blog.csdnimg.cn/2b366cbfe7754a7f972f45ce093a1e63.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<h3 id="自定义类型转换器"><a href="#自定义类型转换器" class="headerlink" title="自定义类型转换器"></a>自定义类型转换器</h3><ul>
<li>SpringMVC 默认已经提供了一些常用的类型转换器，例如客户端提交的字符串转换成int型进行参数设置。</li>
<li>但是不是所有的数据类型都提供了转换器，没有提供的就需要自定义转换器，例如：日期类型的数据就需要自定义转换器。</li>
</ul>
<p>自定义类型转换器的开发步骤：</p>
<ol>
<li>定义转换器类实现Converter接口</li>
<li>在配置文件中声明转换器</li>
<li>在<annotation-driven>中引用转换器</li>
</ol>
<p>第一步：定义转换器类实现Converter接口<br><img src="https://img-blog.csdnimg.cn/716cf7ac78244479a05ffad7bcf0bce8.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br>第二步：在配置文件中声明转换器<br><img src="https://img-blog.csdnimg.cn/77303542b4bd4017af3eb23e48adfa8c.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></p>
<p>第三步：在<annotation-driven>中引用转换器<br><img src="https://img-blog.csdnimg.cn/e0ccfa3301e14ee185ce5b40c14aedb5.png" srcset="/img/newloading.gif" lazyload></p>
<h3 id="获得Servlet相关API"><a href="#获得Servlet相关API" class="headerlink" title="获得Servlet相关API"></a>获得Servlet相关API</h3><p>SpringMVC支持使用原始ServletAPI对象作为控制器方法的参数进行注入，常用的对象如下：</p>
<ul>
<li>HttpServletRequest</li>
<li>HttpServletResponse</li>
<li>HttpSession<br><img src="https://img-blog.csdnimg.cn/7ebf8f4b4a70417d9a7ed77689353de1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="获得请求头"><a href="#获得请求头" class="headerlink" title="获得请求头"></a>获得请求头</h3></li>
</ul>
<p><strong>@RequestHeader</strong></p>
<p>使用@RequestHeader可以获得请求头信息，相当于web阶段学习的request.getHeader(name)<br>@RequestHeader注解的属性如下：</p>
<ul>
<li>value：请求头的名称</li>
<li>required：是否必须携带此请求头<br><img src="https://img-blog.csdnimg.cn/6c1ff3cdb70047ba949a91d2b04b0958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
</ul>
<p> <strong>@CookieValue</strong><br> 使用@CookieValue可以获得指定Cookie的值<br>@CookieValue注解的属性如下：</p>
<ul>
<li>value：指定cookie的名称</li>
<li>required：是否必须携带此cookie<br><img src="https://img-blog.csdnimg.cn/d9e367c8f3914b71920452022feb9018.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3></li>
<li>文件上传客户端三要素</li>
<li>表单项type=“file”</li>
<li>表单的提交方式是post</li>
<li>表单的enctype属性是多部分表单形式，及enctype=“multipart/form-data”<br><img src="https://img-blog.csdnimg.cn/b63240a6a76e4525a92ada9ab15d0cef.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
</ul>
<p> 2.文件上传原理</p>
<ul>
<li>当form表单修改为多部分表单时，request.getParameter()将失效。</li>
<li>enctype=“application/x-www-form-urlencoded”时，form表单的正文内容格式是：key=value&amp;key=value&amp;key=value</li>
<li>当form表单的enctype取值为Mutilpart/form-data时，请求正文内容就变成多部分形式：<br><img src="https://img-blog.csdnimg.cn/e9b033b204354e8aba76807f89fb8bb1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="单文件上传步骤"><a href="#单文件上传步骤" class="headerlink" title="单文件上传步骤"></a>单文件上传步骤</h3></li>
</ul>
<ol>
<li>导入fileupload和io坐标</li>
<li>配置文件上传解析器</li>
<li>编写文件上传代码</li>
</ol>
<h3 id="单文件上传实现"><a href="#单文件上传实现" class="headerlink" title="单文件上传实现"></a>单文件上传实现</h3><ol>
<li>导入fileupload和io坐标<br><img src="https://img-blog.csdnimg.cn/7efaf2016e28429e9d3635de3221d038.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
<li>配置文件上传解析器<br><img src="https://img-blog.csdnimg.cn/beb05768c2ee45f9936ce9beac0b7747.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload></li>
<li>编写文件上传代码<br><img src="https://img-blog.csdnimg.cn/eaf4d38a7d80401a8ac7c02c900ff56c.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h3 id="多文件上传实现"><a href="#多文件上传实现" class="headerlink" title="多文件上传实现"></a>多文件上传实现</h3>多文件上传，只需要将页面修改为多个文件上传项，将方法参数MultipartFile类型修改为MultipartFile[]即可<br><img src="https://img-blog.csdnimg.cn/b81abfe757294d3caf33477ee4857c51.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/091e57918d2f439d816eb39bf056bade.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl81MTI2NzQ2NQ==,size_16,color_FFFFFF,t_70" srcset="/img/newloading.gif" lazyload><h2 id="SpingMVC拦截器"><a href="#SpingMVC拦截器" class="headerlink" title="SpingMVC拦截器"></a>SpingMVC拦截器</h2>Spring MVC 的拦截器类似于 Servlet  开发中的过滤器 Filter，用于对处理器进行预处理和后处理。</li>
</ol>
<p>将拦截器按一定的顺序联结成一条链，这条链称为拦截器链（Interceptor Chain）。在访问被拦截的方法或字段时，拦截器链中的拦截器就会按其之前定义的顺序被调用。拦截器也是AOP思想的具体实现。<br><img src="https://img-blog.csdnimg.cn/d42511f560db4662ae411f03f2802a4a.png" srcset="/img/newloading.gif" lazyload></p>
<h3 id="拦截器快速入门"><a href="#拦截器快速入门" class="headerlink" title="拦截器快速入门"></a>拦截器快速入门</h3><p>自定义拦截器很简单，只有如下三步：</p>
<ul>
<li>创建拦截器类实现HandlerInterceptor接口</li>
<li>配置拦截器</li>
<li>测试拦截器的拦截效果</li>
</ul>
<ol>
<li>创建拦截器类实现HanderInterceptor接口<br><img src="https://img-blog.csdnimg.cn/5c6d8f1e257d477ea5af538769825e80.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>配置拦截器<br><img src="https://img-blog.csdnimg.cn/8178ae803fe946a1bd730812c680eee7.png" srcset="/img/newloading.gif" lazyload></li>
<li>测试拦截器的拦截效果(编写目标方法)<br><img src="https://img-blog.csdnimg.cn/4506961bd9814200bbee39159c6a96e9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="拦截器方法说明"><a href="#拦截器方法说明" class="headerlink" title="拦截器方法说明"></a>拦截器方法说明</h3><img src="https://img-blog.csdnimg.cn/b6e1470a7c224c08957ba1f54a78b6c6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h2 id="SpringMVC异常处理"><a href="#SpringMVC异常处理" class="headerlink" title="SpringMVC异常处理"></a>SpringMVC异常处理</h2><h3 id="异常处理思路"><a href="#异常处理思路" class="headerlink" title="异常处理思路"></a>异常处理思路</h3>系统中异常包括两类：预期异常和运行时异常RuntimeException，前者通过捕获异常从而获取异常信息，后者主要通过规范代码开发、测试等手段减少运行时异常的发生。</li>
</ol>
<p>系统的Dao、Service、Controller出现都通过throws Exception向上抛出，最后由SpringMVC前端控制器交由异常处理器进行异常处理，如下图：<br><img src="https://img-blog.csdnimg.cn/46fa50f2b8ba4b2380212898600593e3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="异常处理两种方式"><a href="#异常处理两种方式" class="headerlink" title="异常处理两种方式"></a>异常处理两种方式</h3><ul>
<li>使用Spring MVC提供的简单异常处理器SimpleMappingExceptionResolver</li>
<li>实现Spring的异常处理接口HandlerExceptionResolver 自定义自己的异常处理器<h3 id="简单异常处理器SimpleMappingExceptionResolver"><a href="#简单异常处理器SimpleMappingExceptionResolver" class="headerlink" title="简单异常处理器SimpleMappingExceptionResolver"></a>简单异常处理器SimpleMappingExceptionResolver</h3>SpringMVC已经定义好了该类型转换器，在使用时可以根据项目情况进行相应异常与视图的映射配置<br><img src="https://img-blog.csdnimg.cn/108f3112b8494b96b1291345ef7ae81e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="自定义异常处理步骤"><a href="#自定义异常处理步骤" class="headerlink" title="自定义异常处理步骤"></a>自定义异常处理步骤</h3></li>
<li>创建异常处理器类实现HandlerExceptionResolver</li>
<li>配置异常处理器</li>
<li>编写异常页面</li>
<li>测试异常跳转</li>
</ul>
<ol>
<li>创建异常处理器类实现HandlerExceptionResolver<br><img src="https://img-blog.csdnimg.cn/15fd2477860e410a9a6ab4310a971c39.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>配置异常处理器<br><img src="https://img-blog.csdnimg.cn/34dfe53644f3401991adc8df5bfa0711.png" srcset="/img/newloading.gif" lazyload></li>
<li>编写异常界面<br><img src="https://img-blog.csdnimg.cn/c386286334864ab885334671c5084e38.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>测试异常跳转<br><img src="https://img-blog.csdnimg.cn/7c482c2c432d41028f23d2236eff5e21.png" srcset="/img/newloading.gif" lazyload><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="AOP简介"><a href="#AOP简介" class="headerlink" title="AOP简介"></a>AOP简介</h3><h4 id="what-is-AOP"><a href="#what-is-AOP" class="headerlink" title="what is AOP"></a>what is AOP</h4>AOP 为 Aspect Oriented Programming 的缩写，意思为面向切面编程，是通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</li>
</ol>
<p>AOP 是 OOP 的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数式编程的一种衍生范型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<h3 id="AOP的作用及其优势"><a href="#AOP的作用及其优势" class="headerlink" title="AOP的作用及其优势"></a>AOP的作用及其优势</h3><p>作用：在程序运行期间，在不修改源码的情况下对方法进行功能增强<br>优势：减少重复代码，提高开发效率，并且便于维护</p>
<h4 id="AOP的底层实现"><a href="#AOP的底层实现" class="headerlink" title="AOP的底层实现"></a>AOP的底层实现</h4><p>实际上，AOP 的底层是通过 Spring 提供的的动态代理技术实现的。在运行期间，Spring通过动态代理技术动态的生成代理对象，代理对象方法执行时进行增强功能的介入，在去调用目标对象的方法，从而完成功能的增强。</p>
<h4 id="AOP的动态代理技术"><a href="#AOP的动态代理技术" class="headerlink" title="AOP的动态代理技术"></a>AOP的动态代理技术</h4><p>常用的动态代理技术</p>
<ul>
<li>JDK 代理 : 基于接口的动态代理技术</li>
<li>cglib 代理：基于父类的动态代理技术<br><img src="https://img-blog.csdnimg.cn/597b487129e544ca8433c1addb2c5985.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h4 id="JDK的动态代理"><a href="#JDK的动态代理" class="headerlink" title="JDK的动态代理"></a>JDK的动态代理</h4></li>
</ul>
<ol>
<li>目标类接口<br><img src="https://img-blog.csdnimg.cn/7d79d56d680c448f861f52411aa969c6.png" srcset="/img/newloading.gif" lazyload></li>
<li>目标类<br><img src="https://img-blog.csdnimg.cn/dcc05f9a4a3442058c0550325c333b4a.png" srcset="/img/newloading.gif" lazyload></li>
<li>动态代理代码<br><img src="https://img-blog.csdnimg.cn/5b8282ad19a14c9cad04e18fac8c044a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_16,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>  调用代理对象的方法测试<br><img src="https://img-blog.csdnimg.cn/7e15f7efcfde451f973beea01a9f5a76.png" srcset="/img/newloading.gif" lazyload></li>
</ol>
<h4 id="cglib-的动态代理"><a href="#cglib-的动态代理" class="headerlink" title="cglib 的动态代理"></a>cglib 的动态代理</h4><ol>
<li>目标类<br><img src="https://img-blog.csdnimg.cn/7cc6af3d2e7f40a393baab14ff33509a.png" srcset="/img/newloading.gif" lazyload></li>
<li>动态代理代码<br><img src="https://img-blog.csdnimg.cn/90060857e1984fca9cc3e27ed7bf64b5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>调用代理对象的方法测试<br><img src="https://img-blog.csdnimg.cn/578dad23ff914b4faeb5bc027e1a7e51.png" srcset="/img/newloading.gif" lazyload><h4 id="AOP相关的概念"><a href="#AOP相关的概念" class="headerlink" title="AOP相关的概念"></a>AOP相关的概念</h4>Spring 的 AOP 实现底层就是对上面的动态代理的代码进行了封装，封装后我们只需要对需要关注的部分进行代码编写，并通过配置的方式完成指定目标的方法增强。</li>
</ol>
<p>Target（目标对象）：代理的目标对象<br> Proxy （代理）：一个类被 AOP 织入增强后，就产生一个结果代理类<br> Joinpoint（连接点）：所谓连接点是指那些被拦截到的点。在spring中,这些点指的是方法，因为spring只支持方法类型的连接点<br> Pointcut（切入点）：所谓切入点是指我们要对哪些 Joinpoint 进行拦截的定义<br> Advice（通知/ 增强）：所谓通知是指拦截到 Joinpoint 之后所要做的事情就是通知<br> Aspect（切面）：是切入点和通知（引介）的结合<br> Weaving（织入）：是指把增强应用到目标对象来创建新的代理对象的过程。spring采用动态代理织入，而AspectJ采用编译期织入和类装载期织入</p>
<h4 id="AOP-开发明确的事项"><a href="#AOP-开发明确的事项" class="headerlink" title="AOP 开发明确的事项"></a>AOP 开发明确的事项</h4><ol>
<li>需要编写的内容<br>编写核心业务代码（目标类的目标方法）<br> 编写切面类，切面类中有通知(增强功能方法)<br> 在配置文件中，配置织入关系，即将哪些通知与哪些连接点进行结合</li>
<li>AOP 技术实现的内容<br>Spring 框架监控切入点方法的执行。一旦监控到切入点方法被运行，使用代理机制，动态创建目标对象的代理对象，根据通知类别，在代理对象的对应位置，将通知对应的功能织入，完成完整的代码逻辑运行。</li>
<li>AOP 底层使用哪种代理方式<br>在 spring 中，框架会根据目标类是否实现了接口来决定采用哪种动态代理的方式。<h4 id="AOP知识要点"><a href="#AOP知识要点" class="headerlink" title="AOP知识要点"></a>AOP知识要点</h4>aop：面向切面编程<br>aop底层实现：基于JDK的动态代理 和 基于Cglib的动态代理<br>aop的重点概念：<pre><code class="hljs"> Pointcut（切入点）：被增强的方法
 Advice（通知/ 增强）：封装增强业务逻辑的方法
 Aspect（切面）：切点+通知
 Weaving（织入）：将切点与通知结合的过程
</code></pre>
开发明确事项：<pre><code class="hljs"> 谁是切点（切点表达式配置）
 谁是通知（切面类中的增强方法）
 将切点和通知进行织入配置
</code></pre>
<h3 id="基于XMl的AOP开发"><a href="#基于XMl的AOP开发" class="headerlink" title="基于XMl的AOP开发"></a>基于XMl的AOP开发</h3><h4 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h4></li>
<li>导入AOP相关坐标<br><img src="https://img-blog.csdnimg.cn/02d1f1c0ecfd44e2b3f40f22b575e586.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>创建目标接口和目标类(内部有切点)<br><img src="https://img-blog.csdnimg.cn/b8aaf1eb93124800a5e990e7030221f6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>创建切面类(内部有增强方法)<br><img src="https://img-blog.csdnimg.cn/4fbce9b92d884288a3c86d8a093c3888.png" srcset="/img/newloading.gif" lazyload></li>
<li>将目标类和切面类 的对象创建权交给spring<br><img src="https://img-blog.csdnimg.cn/7a12cf2570d0404482d6105f4f5e473a.png" srcset="/img/newloading.gif" lazyload></li>
<li>在applicationContext.xml中配置关系<br>导入aop命名空间<br><img src="https://img-blog.csdnimg.cn/ffa56a43dcb54143b09d555ba144db55.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>配置切点表达式和前置增强的植入关系<br><img src="https://img-blog.csdnimg.cn/7e520373a68d45939dadef880e3903af.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>测试代码<br><img src="https://img-blog.csdnimg.cn/a3e5afd1a8494d2199e32c308277636d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h4 id="XML配置AOP详解"><a href="#XML配置AOP详解" class="headerlink" title="XML配置AOP详解"></a>XML配置AOP详解</h4></li>
<li>切点表达式的写法<br>表达式语法<br><img src="https://img-blog.csdnimg.cn/6cfa85d125844c4c8e504cc63c6dec52.png" srcset="/img/newloading.gif" lazyload><br>访问修饰符可以省略<br>返回值类型、包名、类名、方法名可以使用星号*  代表任意<br>包名与类名之间一个点 . 代表当前包下的类，两个点 .. 表示当前包及其子包下的类<br>参数列表可以使用两个点 .. 表示任意个数，任意类型的参数列表<br>such as<br><img src="https://img-blog.csdnimg.cn/2cd6ea67d2014b2097a15999cfa85121.png" srcset="/img/newloading.gif" lazyload></li>
<li>通知的类型<br>通知的配置语法<br><img src="https://img-blog.csdnimg.cn/b8d940713ced47589309eca4dbcfe7fc.png" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/d653ff26f203465e876cd05e243498c9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>切点表达式的抽取<br>当多个增强的切点表达式相同时，可以将切点表达式进行抽取，在增强中使用 pointcut-ref 属性代替 pointcut 属性来引用抽取后的切点表达式。<br><img src="https://img-blog.csdnimg.cn/0f55b30f55ac48e2bb3e86f061b5e6c7.png" srcset="/img/newloading.gif" lazyload><h4 id="知识要点"><a href="#知识要点" class="headerlink" title="知识要点"></a>知识要点</h4>aop织入的配置<br><img src="https://img-blog.csdnimg.cn/f5f01f76bd5b47828406c338de16188c.png" srcset="/img/newloading.gif" lazyload></li>
</ol>
<p>通知的类型：前置通知、后置通知、环绕通知、异常抛出通知、最终通知<br>切点表达式的写法：<br><img src="https://img-blog.csdnimg.cn/f37dc67e5c48445dacfc1c24e4237254.png" srcset="/img/newloading.gif" lazyload></p>
<h3 id="基于注解的AOP开发"><a href="#基于注解的AOP开发" class="headerlink" title="基于注解的AOP开发"></a>基于注解的AOP开发</h3><h4 id="快速入门-1"><a href="#快速入门-1" class="headerlink" title="快速入门"></a>快速入门</h4><p>基于注解的aop开发步骤：</p>
<ul>
<li>创建目标接口和目标类（内部有切点）</li>
<li>创建切面类（内部有增强方法）</li>
<li>将目标类和切面类的对象创建权交给 spring</li>
<li>在切面类中使用注解配置织入关系</li>
<li>在配置文件中开启组件扫描和 AOP 的自动代理</li>
<li>测试</li>
</ul>
<ul>
<li>创建目标接口和目标类（内部有切点）<br><img src="https://img-blog.csdnimg.cn/f8896412ff9c43c6a88ce1da01280225.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>创建切面类<br><img src="https://img-blog.csdnimg.cn/225cb81e24214304b24a4a13596b1494.png" srcset="/img/newloading.gif" lazyload></li>
<li>将目标类和切面类的对象创建权交给 spring<br><img src="https://img-blog.csdnimg.cn/a8ec6e8652ef4ed4b615ab9678b80a24.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>在切面类中使用注解配置织入关系<br><img src="https://img-blog.csdnimg.cn/b5f21dae22d447d1a3270fedf57b8488.png" srcset="/img/newloading.gif" lazyload></li>
<li>在配置文件中开启组件扫描和 AOP 的自动代理<br><img src="https://img-blog.csdnimg.cn/a9071c431c17487b85768b6f2199083a.png" srcset="/img/newloading.gif" lazyload></li>
<li>测试代码<br><img src="https://img-blog.csdnimg.cn/3eacece3ec2a4a6ba67daae1fbf73663.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h4 id="注解配置-AOP-详解"><a href="#注解配置-AOP-详解" class="headerlink" title="注解配置 AOP 详解"></a>注解配置 AOP 详解</h4></li>
<li>注解通知的类型<br>通知的配置语法：@通知注解(“切点表达式”)<br><img src="https://img-blog.csdnimg.cn/ad15f9b2e01b456280c4254393070d1a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>切点表达式的抽取<br>同 xml 配置 aop 一样，我们可以将切点表达式抽取。抽取方式是在切面内定义方法，在该方法上使用@Pointcut注解定义切点表达式，然后在在增强注解中进行引用。具体如下：<br><img src="https://img-blog.csdnimg.cn/e3de90ec8a644289aa3986dc099f135c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h4 id="知识要点-1"><a href="#知识要点-1" class="headerlink" title="知识要点"></a>知识要点</h4>注解aop开发步骤</li>
<li>使用@Aspect标注切面类</li>
<li>使用@通知注解标注通知方法</li>
<li>在配置文件中配置aop自动代理<a href="aop:aspectj-autoproxy/">aop:aspectj-autoproxy/</a></li>
</ul>
<p>通知注解类型<br><img src="https://img-blog.csdnimg.cn/77ad6c92507f49e197088f5a6f2e7096.png" srcset="/img/newloading.gif" lazyload></p>
<h3 id="编程式事物控制相关对象"><a href="#编程式事物控制相关对象" class="headerlink" title="编程式事物控制相关对象"></a>编程式事物控制相关对象</h3><h4 id="PlatformTransactionManager"><a href="#PlatformTransactionManager" class="headerlink" title="PlatformTransactionManager"></a>PlatformTransactionManager</h4><p>PlatformTransactionManager 接口是 spring 的事务管理器，它里面提供了我们常用的操作事务的方法。<br><img src="https://img-blog.csdnimg.cn/1393e4db1d214b42880dfb5fb31aa980.png" srcset="/img/newloading.gif" lazyload><br> 注意：<br>PlatformTransactionManager 是接口类型，不同的 Dao 层技术则有不同的实现类，例如：Dao 层技术是jdbc 或 mybatis 时：org.springframework.jdbc.datasource.DataSourceTransactionManager<br>Dao 层技术是hibernate时：org.springframework.orm.hibernate5.HibernateTransactionManager</p>
<h4 id="TransactionDefinition"><a href="#TransactionDefinition" class="headerlink" title="TransactionDefinition"></a>TransactionDefinition</h4><p>TransactionDefinition 是事务的定义信息对象，里面有如下方法：<br><img src="https://img-blog.csdnimg.cn/aa6d441c4e8542619f25fda9aae1317f.png" srcset="/img/newloading.gif" lazyload></p>
<ul>
<li><p>事务隔离级别<br>设置隔离级别，可以解决事务并发产生的问题，如脏读、不可重复读和虚读。</p>
</li>
<li><p>ISOLATION_DEFAULT</p>
</li>
<li><p>ISOLATION_READ_UNCOMMITTED</p>
</li>
<li><p>ISOLATION_READ_COMMITTED</p>
</li>
<li><p>ISOLATION_REPEATABLE_READ</p>
</li>
<li><p>ISOLATION_SERIALIZABLE</p>
</li>
<li><p>事务传播行为</p>
</li>
<li><p>REQUIRED：如果当前没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。一般的选择（默认值）</p>
</li>
<li><p>SUPPORTS：支持当前事务，如果当前没有事务，就以非事务方式执行（没有事务）</p>
</li>
<li><p>MANDATORY：使用当前的事务，如果当前没有事务，就抛出异常</p>
</li>
<li><p>REQUERS_NEW：新建事务，如果当前在事务中，把当前事务挂起。</p>
</li>
<li><p>NOT_SUPPORTED：以非事务方式执行操作，如果当前存在事务，就把当前事务挂起</p>
</li>
<li><p>NEVER：以非事务方式运行，如果当前存在事务，抛出异常</p>
</li>
<li><p>NESTED：如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行 REQUIRED 类似的操作</p>
</li>
<li><p>超时时间：默认值是-1，没有超时限制。如果有，以秒为单位进行设置</p>
</li>
<li><p>是否只读：建议查询时设置为只读</p>
</li>
</ul>
<p>TransactionStatus 接口提供的是事务具体的运行状态，方法介绍如下。<br><img src="https://img-blog.csdnimg.cn/8406dde798c24cf18588811363403670.png" srcset="/img/newloading.gif" lazyload></p>
<h4 id="知识要点-2"><a href="#知识要点-2" class="headerlink" title="知识要点"></a>知识要点</h4><p>编程式事务控制三大对象</p>
<ul>
<li>PlatformTransactionManager</li>
<li>TransactionDefinition</li>
<li>TransactionStatus<h3 id="基于-XML-的声明式事务控制"><a href="#基于-XML-的声明式事务控制" class="headerlink" title="基于 XML 的声明式事务控制"></a>基于 XML 的声明式事务控制</h3></li>
</ul>
<p><strong>什么是声明式事务控制</strong><br>Spring 的声明式事务顾名思义就是采用声明的方式来处理事务。这里所说的声明，就是指在配置文件中声明，用在 Spring 配置文件中声明式的处理事务来代替代码式的处理事务。<br><strong>声明式事务处理的作用</strong></p>
<ul>
<li><p>事务管理不侵入开发的组件。具体来说，业务逻辑对象就不会意识到正在事务管理之中，事实上也应该如此，因为事务管理是属于系统层面的服务，而不是业务逻辑的一部分，如果想要改变事务管理策划的话，也只需要在定义文件中重新配置即可</p>
</li>
<li><p>在不需要事务管理的时候，只要在设定文件上修改一下，即可移去事务管理服务，无需改变代码重新编译，这样维护起来极其方便<br>注意：Spring 声明式事务控制底层就是AOP。</p>
<h4 id="声明式事务控制的实现"><a href="#声明式事务控制的实现" class="headerlink" title="声明式事务控制的实现"></a>声明式事务控制的实现</h4></li>
<li><p>引入tx命名空间 <img src="https://img-blog.csdnimg.cn/7ab3cf3a98fd4df39019ab46f26dd053.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>配置事务增强<br><img src="https://img-blog.csdnimg.cn/ce9cc82c597c47d1b907380c0cd4e099.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>配置事务AOP织入<br><img src="https://img-blog.csdnimg.cn/ac548a87ed4c48eebffc6d9bf24ffe0a.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>测试事务控制转账业务代码<br><img src="https://img-blog.csdnimg.cn/a702ceb329e14d268f06e44273ae1ad7.png" srcset="/img/newloading.gif" lazyload></p>
<h4 id="切点方法的事务参数的配置"><a href="#切点方法的事务参数的配置" class="headerlink" title="切点方法的事务参数的配置"></a>切点方法的事务参数的配置</h4><p><img src="https://img-blog.csdnimg.cn/e6c4b56f28984a77b03a4db7f8288b15.png" srcset="/img/newloading.gif" lazyload><br>其中，<a href="tx:method">tx:method</a> 代表切点方法的事务参数的配置，例如：<br>&lt;tx:method name=”transfer” isolation=”REPEATABLE_READ” propagation=”REQUIRED” timeout=”-1” read-only=”false”/&gt;</p>
</li>
<li><p>name：切点方法名称</p>
</li>
<li><p>isolation:事务的隔离级别</p>
</li>
<li><p>propogation：事务的传播行为</p>
</li>
<li><p>timeout：超时时间</p>
</li>
<li><p>read-only：是否只读</p>
</li>
</ul>
<h3 id="基于注解的声明式事务控制"><a href="#基于注解的声明式事务控制" class="headerlink" title="基于注解的声明式事务控制"></a>基于注解的声明式事务控制</h3><h4 id="使用注解怕配置声明式事务控制"><a href="#使用注解怕配置声明式事务控制" class="headerlink" title="使用注解怕配置声明式事务控制"></a>使用注解怕配置声明式事务控制</h4><ul>
<li><p>编写AccountDao<br><img src="https://img-blog.csdnimg.cn/894d123f7e524261a6b6886077542a35.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写AccountService<br><img src="https://img-blog.csdnimg.cn/dc910d02eceb4338957acc4086b7b743.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写applicationContext.xml配置文件<br><img src="https://img-blog.csdnimg.cn/7779f1dcdb654863b55b0c165a985a9c.png" srcset="/img/newloading.gif" lazyload></p>
<h4 id="注解配置声明式事务控制解析"><a href="#注解配置声明式事务控制解析" class="headerlink" title="注解配置声明式事务控制解析"></a>注解配置声明式事务控制解析</h4></li>
<li><p>使用 @Transactional 在需要进行事务控制的类或是方法上修饰，注解可用的属性同 xml 配置方式，例如隔离级别、传播行为等。</p>
</li>
<li><p>注解使用在类上，那么该类下的所有方法都使用同一套注解参数配置。</p>
</li>
<li><p>使用在方法上，不同的方法可以采用不同的事务参数配置。</p>
</li>
<li><p>Xml配置文件中要开启事务的注解驱动&lt;tx:annotation-driven /&gt;</p>
</li>
</ul>
<h1 id="三、Mybatis"><a href="#三、Mybatis" class="headerlink" title="三、Mybatis"></a>三、Mybatis</h1><h2 id="Mybatis简介"><a href="#Mybatis简介" class="headerlink" title="Mybatis简介"></a>Mybatis简介</h2><h3 id="什么是Mybatis"><a href="#什么是Mybatis" class="headerlink" title="什么是Mybatis"></a>什么是Mybatis</h3><ul>
<li><p>mybatis是一个优秀的基于java的持久层框架，它内部封装了jdbc，使开发者只需要关注sql语句本身，而不需要花费精力去处理加载驱动、创建连接、创建statement等繁杂的过程。</p>
</li>
<li><p>mybatis通过xml或注解的方式将要执行的各种statement配置起来，并通过java对象和statement中sql的动态参数进行映射生成最终执行的sql语句。</p>
</li>
<li><p>最后mybatis框架执行sql并将结果映射为java对象并返回。采用ORM思想解决了实体和数据库映射的问题，对jdbc进行了封装，屏蔽了jdbc api 底层访问细节，使我们不用与jdbc api 打交道，就可以完成对数据库的持久化操作。</p>
<h2 id="Mybatis快速入门"><a href="#Mybatis快速入门" class="headerlink" title="Mybatis快速入门"></a>Mybatis快速入门</h2><h3 id="Mybatis开发步骤"><a href="#Mybatis开发步骤" class="headerlink" title="Mybatis开发步骤"></a>Mybatis开发步骤</h3><p>Mybatis官网地址:<a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/">http://www.mybatis.org/mybatis-3/</a> </p>
</li>
<li><p>添加MyBatis的坐标</p>
</li>
<li><p>创建user数据表</p>
</li>
<li><p>编写User实体类</p>
</li>
<li><p>编写映射文件UserMapper.xml</p>
</li>
<li><p>编写核心文件SqlMapConfig.xml</p>
</li>
<li><p>编写测试类</p>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3></li>
<li><p>导入Mybatis坐标及其他的相关坐标<br><img src="https://img-blog.csdnimg.cn/225158e128ea4e5f9b5453602758a74e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/a212bdab459b46d6a1888e7fd3cae927.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>创建user表格<br><img src="https://img-blog.csdnimg.cn/43bead460b1547be97ea217221b9e9b9.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写user实体<br><img src="https://img-blog.csdnimg.cn/da55da36266f4127b41472521768535e.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写UserMapper映射文件<br><img src="https://img-blog.csdnimg.cn/a368a5d98bbc4bfa8ffdf3e1f41b5d5e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写Mybatis核心文件<br><img src="https://img-blog.csdnimg.cn/d6b67ec5fb2748b49c3b4106cf8171ef.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写测试代码<br><img src="https://img-blog.csdnimg.cn/05b415fa27f84132a03fcf1c63ef54bc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h2 id="Mybatis映射文件概述"><a href="#Mybatis映射文件概述" class="headerlink" title="Mybatis映射文件概述"></a>Mybatis映射文件概述</h2><p><img src="https://img-blog.csdnimg.cn/aad594d3007d46d2bb5dc5b177bf7bf6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h2 id="Mybatis的增删改查操作"><a href="#Mybatis的增删改查操作" class="headerlink" title="Mybatis的增删改查操作"></a>Mybatis的增删改查操作</h2><h3 id="插入数据操作"><a href="#插入数据操作" class="headerlink" title="插入数据操作"></a>插入数据操作</h3></li>
<li><p>编写UserMapper映射文件<br><img src="https://img-blog.csdnimg.cn/bccd584e23e44a8f9a40ba4a66e81e2d.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写插入实体的User的代码<br><img src="https://img-blog.csdnimg.cn/b9fde840bf8044d393f2dc4279a70e38.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>插入操作需要注意的问题</p>
</li>
<li><p>插入语句使用insert标签</p>
</li>
<li><p>在映射文件中使用parameterType属性指定要插入的数据类型</p>
</li>
<li><p>Sql语句中使用#{实体属性名}方式引用实体中的属性值</p>
</li>
<li><p>插入操作使用的API是sqlSession.insert(“命名空间.id”,实体对象);</p>
</li>
<li><p>插入操作涉及数据库数据变化，所以要使用sqlSession对象显示的提交事务，即sqlSession.commit()</p>
<h3 id="修改数据操作"><a href="#修改数据操作" class="headerlink" title="修改数据操作"></a>修改数据操作</h3></li>
<li><p>编写UserMapper的映射文件<img src="https://img-blog.csdnimg.cn/2cfad8f0631b4caf92eaab9350924833.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写修改 实体User的代码<img src="https://img-blog.csdnimg.cn/6cbdffb9cd524e81a5de7ed773e4ef17.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>修改操作需要注意的问题</p>
</li>
<li><p>修改语句使用update标签</p>
</li>
<li><p>修改操作使用的API是sqlSession.update(“命名空间.id”,实体对象);</p>
<h3 id="删除数据操作"><a href="#删除数据操作" class="headerlink" title="删除数据操作"></a>删除数据操作</h3></li>
</ul>
<ol>
<li><p> 编写UserMapper的映射文件<br><img src="https://img-blog.csdnimg.cn/b7db8b877fdb4e14a62c8ee5a31c8e9c.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写删除数据的代码<img src="https://img-blog.csdnimg.cn/63448c5b51dc4c3a84747ea5e25bf699.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>删除操作需注意问题</p>
</li>
</ol>
<ul>
<li><p>删除语句使用delete标签</p>
</li>
<li><p>Sql语句中使用#{任意字符串}方式引用传递的单个参数</p>
</li>
<li><p>删除操作使用的API是sqlSession.delete(“命名空间.id”,Object);</p>
<h3 id="知识小结"><a href="#知识小结" class="headerlink" title="知识小结"></a>知识小结</h3><p>增删改查映射配置与API：</p>
</li>
</ul>
<p><strong>查询数据：</strong> </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">List<span class="hljs-tag">&lt;<span class="hljs-name">User</span>&gt;</span> userList = sqlSession.selectList(&quot;userMapper.findAll&quot;);<br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.itheima.domain.User&quot;</span>&gt;</span> <br>           select * from User    <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>添加数据： </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">sqlSession.insert(&quot;userMapper.add&quot;, user);<br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;add&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.itheima.domain.User&quot;</span>&gt;</span>   <br>         insert into user values(#&#123;id&#125;,#&#123;username&#125;,#&#123;password&#125;)   <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>修改数据：</strong> </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">sqlSession.update(&quot;userMapper.update&quot;, user);<br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;com.itheima.domain.User&quot;</span>&gt;</span><br>            update user set username=#&#123;username&#125;,password=#&#123;password&#125; where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>删除数据：</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml">sqlSession.delete(&quot;userMapper.delete&quot;,3);<br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>            delete from user where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="Mybatis核心配置文件概述"><a href="#Mybatis核心配置文件概述" class="headerlink" title="Mybatis核心配置文件概述"></a>Mybatis核心配置文件概述</h2><h3 id="Mybatis核心配置文件的层级关系"><a href="#Mybatis核心配置文件的层级关系" class="headerlink" title="Mybatis核心配置文件的层级关系"></a>Mybatis核心配置文件的层级关系</h3><p><img src="https://img-blog.csdnimg.cn/2eb7dbb054a643e386e8b479007d3458.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_13,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="Mybatis常用配置文件解析"><a href="#Mybatis常用配置文件解析" class="headerlink" title="Mybatis常用配置文件解析"></a>Mybatis常用配置文件解析</h3><h4 id="environment标签"><a href="#environment标签" class="headerlink" title="environment标签"></a>environment标签</h4><p>数据库环境的配置，支持多环境配置<br><img src="https://img-blog.csdnimg.cn/d2cbeb9afd984ca2b3ae1a310f4f1c7e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>其中，事务管理器（transactionManager）类型有<strong>两种：</strong></p>
<ul>
<li>JDBC：这个配置就是直接使用了JDBC 的提交和回滚设置，它依赖于从数据源得到的连接来管理事务作用域。</li>
<li>MANAGED：这个配置几乎没做什么。它从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期（比如 JEE 应用服务器的上下文）。<br>默认情况下它会关闭连接，然而一些容器并不希望这样，因此需要将 closeConnection 属性设置为 false来阻止它默认的关闭行为。</li>
</ul>
<p>其中，数据源（dataSource）类型有<strong>三种：</strong></p>
<ul>
<li>UNPOOLED：这个数据源的实现只是每次被请求时打开和关闭连接。</li>
<li>POOLED：这种数据源的实现利用“池”的概念将 JDBC 连接对象组织起来。</li>
<li>JNDI：这个数据源的实现是为了能在如 EJB 或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置一个 JNDI<br>上下文的引用。</li>
</ul>
<h4 id="mapper标签"><a href="#mapper标签" class="headerlink" title="mapper标签"></a>mapper标签</h4><p>该标签的作用是加载映射的，加载方式有如下几种：</p>
<ul>
<li><p>使用相对于类路径的资源引用，例如：<mapper
resource="org/mybatis/builder/AuthorMapper.xml"/></p>
</li>
<li><p>使用完全限定资源定位符（URL），例如：<mapper
url="file:///var/mappers/AuthorMapper.xml"/></p>
</li>
<li><p>使用映射器接口实现类的完全限定类名，例如：<mapper
class="org.mybatis.builder.AuthorMapper"/></p>
</li>
<li><p>将包内的映射器接口实现全部注册为映射器，例如：<package name="org.mybatis.builder"/></p>
</li>
</ul>
<h4 id="Properties标签"><a href="#Properties标签" class="headerlink" title="Properties标签"></a>Properties标签</h4><p>实际开发中，习惯将数据源的配置信息单独抽取成一个properties文件，该标签可以加载额外配置的properties文件<br><img src="https://img-blog.csdnimg.cn/72516f858758455690e3d8ca8d6c8da4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h4 id="typeAliases标签"><a href="#typeAliases标签" class="headerlink" title="typeAliases标签"></a>typeAliases标签</h4><p>类型别名是为Java 类型设置一个短的名字。原来的类型名称配置如下<img src="https://img-blog.csdnimg.cn/4343e89b90724414853772d3272d7d24.png" srcset="/img/newloading.gif" lazyload></p>
<p>配置typeAliases，为com.itheima.domain.User定义别名为user<img src="https://img-blog.csdnimg.cn/15e38df494db4a40a50a525960a0ce6d.png" srcset="/img/newloading.gif" lazyload><br>上面我们是自定义的别名，mybatis框架已经为我们设置好的一些常用的类型的别名<img src="https://img-blog.csdnimg.cn/0d9690527d8849658aad22c7feae916f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_16,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h4 id="知识小结-1"><a href="#知识小结-1" class="headerlink" title="知识小结"></a>知识小结</h4><p><img src="https://img-blog.csdnimg.cn/eaa67ee5a7a84a7aa8ff90641af17568.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/cf8422297d1d47ae95e5bbfe1336f9f2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_18,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="Mybatis相应的API"><a href="#Mybatis相应的API" class="headerlink" title="Mybatis相应的API"></a>Mybatis相应的API</h3><h4 id="SqlSession工厂构建器SqlSessionFactoryBuilder"><a href="#SqlSession工厂构建器SqlSessionFactoryBuilder" class="headerlink" title="SqlSession工厂构建器SqlSessionFactoryBuilder"></a>SqlSession工厂构建器SqlSessionFactoryBuilder</h4><p>常用API：SqlSessionFactory  build(InputStream inputStream)<br>通过加载mybatis的核心文件的输入流的形式构建一个SqlSessionFactory对象<img src="https://img-blog.csdnimg.cn/b8fdea1de07a400da906212d5d9be0be.png" srcset="/img/newloading.gif" lazyload></p>
<p>其中， Resources 工具类，这个类在 org.apache.ibatis.io 包中。Resources 类帮助你从类路径下、文件系统或一个 web URL 中加载资源文件。</p>
<h4 id="SqlSession工厂对象SqlSessionFactory"><a href="#SqlSession工厂对象SqlSessionFactory" class="headerlink" title="SqlSession工厂对象SqlSessionFactory"></a>SqlSession工厂对象SqlSessionFactory</h4><p>SqlSessionFactory 有多个个方法创建 SqlSession 实例。常用的有如下两个：<br><img src="https://img-blog.csdnimg.cn/d30d95b8cf3541d092a53db93666966f.png" srcset="/img/newloading.gif" lazyload></p>
<h4 id="SqlSession会话对象"><a href="#SqlSession会话对象" class="headerlink" title="SqlSession会话对象"></a>SqlSession会话对象</h4><p>SqlSession 实例在 MyBatis 中是非常强大的一个类。在这里你会看到所有执行语句、提交或回滚事务和获取映射器实例的方法。<br>执行语句的方法主要有：<img src="https://img-blog.csdnimg.cn/fd1559ea74cc438eab1a64d46a5abea1.png" srcset="/img/newloading.gif" lazyload></p>
<p>操作事务的方法主要有： <img src="https://img-blog.csdnimg.cn/de415019464e41d583a217585437e0e5.png" srcset="/img/newloading.gif" lazyload></p>
<h2 id="MyBatis的Dao层实现"><a href="#MyBatis的Dao层实现" class="headerlink" title="MyBatis的Dao层实现"></a>MyBatis的Dao层实现</h2><h3 id="传统开发方式"><a href="#传统开发方式" class="headerlink" title="传统开发方式"></a>传统开发方式</h3><ol>
<li><p>编写UserDao接口<img src="https://img-blog.csdnimg.cn/193a2fe2fafe4389aaa7a42e71c5581e.png" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p>编写UserDaoImpl实现<img src="https://img-blog.csdnimg.cn/51aa877c88844a93a60b1b460a7870b2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
</li>
<li><p> 测试传统方式<img src="https://img-blog.csdnimg.cn/c522d5a567c140ee886a3021a7c23995.png" srcset="/img/newloading.gif" lazyload></p>
</li>
</ol>
<h3 id="代理开发方式"><a href="#代理开发方式" class="headerlink" title="代理开发方式"></a>代理开发方式</h3><ul>
<li>代理开发方式介绍<br>采用 Mybatis 的代理开发方式实现 DAO 层的开发，这种方式是我们后面进入企业的主流。<br>Mapper 接口开发方法只需要程序员编写Mapper 接口（相当于Dao 接口），由Mybatis 框架根据接口定义创建接口的动态代理对象，代理对象的方法体同上边Dao接口实现类方法。<br>Mapper 接口开发需要遵循以下规范：<br>1、 Mapper.xml文件中的namespace与mapper接口的全限定名相同<br>2、 Mapper接口方法名和Mapper.xml中定义的每个statement的id相同<br>3、 Mapper接口方法的输入参数类型和mapper.xml中定义的每个sql的parameterType的类型相同<br>4、 Mapper接口方法的输出参数类型和mapper.xml中定义的每个sql的resultType的类型相同</li>
<li>编写UserMapper接口<img src="https://img-blog.csdnimg.cn/e3189f1a722d436ab9d61833d35a2fb1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>测试代理方法<img src="https://img-blog.csdnimg.cn/da1ba5b48ea5495996a344e1fdcd26ab.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="知识小结-2"><a href="#知识小结-2" class="headerlink" title="知识小结"></a>知识小结</h3><img src="https://img-blog.csdnimg.cn/3e9e85e6f6914b7ca1a2a04e80c464ef.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h2 id="Mybatis映射文件深入"><a href="#Mybatis映射文件深入" class="headerlink" title="Mybatis映射文件深入"></a>Mybatis映射文件深入</h2><h3 id="动态sql语句"><a href="#动态sql语句" class="headerlink" title="动态sql语句"></a>动态sql语句</h3></li>
</ul>
<p><strong>1. 概述</strong><br>Mybatis 的映射文件中，前面我们的 SQL 都是比较简单的，有些时候业务逻辑复杂时，我们的 SQL是动态变化的，此时在前面的学习中我们的 SQL 就不能满足要求了。<br><strong>2. 动态语句之if</strong><br>我们根据实体类的不同取值，使用不同的 SQL语句来进行查询。比如在 id如果不为空时可以根据id查询，如果username 不同空时还要加入用户名作为条件。这种情况在我们的多条件组合查询中经常会碰到。<br><img src="https://img-blog.csdnimg.cn/8b5a41f45185499a9e7c046d69d2d430.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>当查询条件id和username都存在时，控制台打印的sql语句如下：<img src="https://img-blog.csdnimg.cn/cf279a20875d426b820f66505dbcb555.png" srcset="/img/newloading.gif" lazyload><br>当查询条件只有id存在时，控制台打印的sql语句如下：<img src="https://img-blog.csdnimg.cn/edfb53af732641f69002baeb8474381c.png" srcset="/img/newloading.gif" lazyload><br><strong>动态 SQL  之foreach</strong><br>循环执行sql的拼接操作，例如：SELECT * FROM USER WHERE id IN (1,2,5)。<img src="https://img-blog.csdnimg.cn/a0b68833b0c342cb8832c1ceedfc5140.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>测试代码片段如下：<img src="https://img-blog.csdnimg.cn/ea525e7cba5b4ba79789e7680d097c8a.png" srcset="/img/newloading.gif" lazyload><br>foreach标签的属性含义如下：<br><foreach>标签用于遍历集合，它的属性：</p>
<ul>
<li>collection：代表要遍历的集合元素，注意编写时不要写#{}</li>
<li>open：代表语句的开始部分</li>
<li>close：代表结束部分</li>
<li>item：代表遍历集合的每个元素，生成的变量名</li>
<li>sperator：代表分隔符<h3 id="SQL片段抽取"><a href="#SQL片段抽取" class="headerlink" title="SQL片段抽取"></a>SQL片段抽取</h3>Sql 中可将重复的 sql 提取出来，使用时用 include 引用即可，最终达到 sql 重用的目的<img src="https://img-blog.csdnimg.cn/2bdfdc078f5f429e8de44df484791ac2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_17,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="知识小结-3"><a href="#知识小结-3" class="headerlink" title="知识小结"></a>知识小结</h3>MyBatis映射文件配置：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;select&gt;：查询<br>&lt;insert&gt;：插入<br>&lt;update&gt;：修改<br>&lt;delete&gt;：删除<br>&lt;where&gt;：where条件<br>&lt;<span class="hljs-keyword">if</span>&gt;：<span class="hljs-keyword">if</span>判断<br>&lt;foreach&gt;：循环<br>&lt;sql&gt;：sql片段抽取<br></code></pre></td></tr></table></figure>
<h2 id="Mybatis核心文件深入"><a href="#Mybatis核心文件深入" class="headerlink" title="Mybatis核心文件深入"></a>Mybatis核心文件深入</h2><h3 id="typeHandlers标签"><a href="#typeHandlers标签" class="headerlink" title="typeHandlers标签"></a>typeHandlers标签</h3><p>无论是 MyBatis 在预处理语句（PreparedStatement）中设置一个参数时，还是从结果集中取出一个值时， 都会用类型处理器将获取的值以合适的方式转换成 Java 类型。下表描述了一些默认的类型处理器（截取部分）。<br><img src="https://img-blog.csdnimg.cn/d47d38f1defb4d9d86a236e133dcb8e6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>你可以重写类型处理器或创建你自己的类型处理器来处理不支持的或非标准的类型。具体做法为：实现 org.apache.ibatis.type.TypeHandler 接口， 或继承一个很便利的类 org.apache.ibatis.type.BaseTypeHandler， 然后可以选择性地将它映射到一个JDBC类型。例如需求：一个Java中的Date数据类型，我想将之存到数据库的时候存成一个1970年至今的毫秒数，取出来时转换成java的Date，即java的Date与数据库的varchar毫秒值之间转换。</p>
<p><strong>开发步骤：</strong></p>
<ol>
<li>定义转换类继承类BaseTypeHandler<T></li>
<li>覆盖4个未实现的方法，其中setNonNullParameter为java程序设置数据到数据库的回调方法，</li>
<li>getNullableResult为查询时 mysql的字符串类型转换成 java的Type类型的方法</li>
<li>在MyBatis核心配置文件中进行注册</li>
<li>测试转换是否正确<img src="https://img-blog.csdnimg.cn/bed28e4fe8ca43578029481d8bb5adba.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/d1cc363925e04dca83a3349995555e01.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="plugins标签"><a href="#plugins标签" class="headerlink" title="plugins标签"></a>plugins标签</h3><p>MyBatis可以使用第三方的插件来对功能进行扩展，分页助手PageHelper是将分页的复杂操作进行封装，使用简单的方式即可获得分页的相关数据<br><strong>开发步骤：</strong></p>
<ol>
<li>导入通用PageHelper的坐标</li>
<li>在mybatis核心配置文件中配置PageHelper插件</li>
<li>测试分页数据获取</li>
</ol>
<p> 导入通用PageHelper坐标<img src="https://img-blog.csdnimg.cn/8dcea71496d44080a82997e0eed5a530.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>在mybatis核心配置文件中配置PageHelper插件<img src="https://img-blog.csdnimg.cn/ad6dc90750b7478a964eb48a83760e46.png" srcset="/img/newloading.gif" lazyload><br>测试分页代码实现<img src="https://img-blog.csdnimg.cn/3ea7f69dcca34363b09a0cadec40d6d9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>获得分页相关的其他参数<img src="https://img-blog.csdnimg.cn/94b75747b4874e70987c4fcea91a224d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="知识小结-4"><a href="#知识小结-4" class="headerlink" title="知识小结"></a>知识小结</h3><p>MyBatis核心配置文件常用标签：<br>1、properties标签：该标签可以加载外部的properties文件<br>2、typeAliases标签：设置类型别名<br>3、environments标签：数据源环境配置标签<br>4、typeHandlers标签：配置自定义类型处理器<br>5、plugins标签：配置MyBatis的插件</p>
<h2 id="Mybatis的多表操作"><a href="#Mybatis的多表操作" class="headerlink" title="Mybatis的多表操作"></a>Mybatis的多表操作</h2><h3 id="一对一查询"><a href="#一对一查询" class="headerlink" title="一对一查询"></a>一对一查询</h3><ol>
<li>一对一查询的模型<br>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户<br>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户<img src="https://img-blog.csdnimg.cn/f26fcdd3b8a740dea3fec531f9acff2a.png" srcset="/img/newloading.gif" lazyload></li>
<li>一对一查询的语句<br>对应的sql语句：select *  from orders o,user u where o.uid=u.id;<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/0968cc81b2ba484eb785a1c5e93624ad.png" srcset="/img/newloading.gif" lazyload></li>
<li> 创建Order和User实体<img src="https://img-blog.csdnimg.cn/ae4d24f609e94fce9737dc5a6465ebcc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 创建OrderMapper接口<br><img src="https://img-blog.csdnimg.cn/4c1b39fb8ae34d019d257b6a2bc3730b.png" srcset="/img/newloading.gif" lazyload></li>
<li> 配置OrderMapper.xml<img src="https://img-blog.csdnimg.cn/81e3f21081df4ed3a5eecea75adcf8fc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>其中resultMap还可以配置如下：<img src="https://img-blog.csdnimg.cn/526e4c58701b4f9aaef6029dee7b1cfc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 测试结果<img src="https://img-blog.csdnimg.cn/e87dd5d63e604ffd9e96924093aaea9e.png" srcset="/img/newloading.gif" lazyload><h3 id="一对多查询"><a href="#一对多查询" class="headerlink" title="一对多查询"></a>一对多查询</h3></li>
<li>一对多查询的模型<br>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户<br>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单<img src="https://img-blog.csdnimg.cn/1f61004f263c49aab77f4059c90e37d8.png" srcset="/img/newloading.gif" lazyload></li>
<li>一对多查询的语句<br>对应的sql语句：select *,o.id oid from user u left join orders o on u.id=o.uid;<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/f4cac2e6e9be44149d4dbfeae0247bd9.png" srcset="/img/newloading.gif" lazyload></li>
<li> 修改User实体<img src="https://img-blog.csdnimg.cn/90bcbc81caff4e58b4152e0bca4e1f0b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 创建UserMapper接口<img src="https://img-blog.csdnimg.cn/9040b43c412042f79f2fb5e3d10c0fd8.png" srcset="/img/newloading.gif" lazyload></li>
<li> 配置UserMapper.xml<img src="https://img-blog.csdnimg.cn/bf4547942f3a4a83ac3a8cd7802f64fa.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 测试结果<img src="https://img-blog.csdnimg.cn/44b9d2df06ed4b46b4972b5b7c933ade.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="多对多查询"><a href="#多对多查询" class="headerlink" title="多对多查询"></a>多对多查询</h3></li>
<li>多对多查询的模型<br>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用<br>多对多查询的需求：查询用户同时查询出该用户的所有角色<img src="https://img-blog.csdnimg.cn/66ef638df034407b8dba74b85bfdcda9.png" srcset="/img/newloading.gif" lazyload></li>
<li>多对多查询的语句<br>对应的sql语句：select u.<em>,r.</em>,r.id rid from user u left join user_role ur on u.id=ur.user_id<br>inner join role r on ur.role_id=r.id;<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/49aa165292704626916ae145ae9abd21.png" srcset="/img/newloading.gif" lazyload></li>
<li> 创建Role实体，修改User实体<img src="https://img-blog.csdnimg.cn/269937e7fa3443079f28b280bce2033e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 添加UserMapper接口方法<img src="https://img-blog.csdnimg.cn/b5845dd85fc240aca7d58d11360d0e8e.png" srcset="/img/newloading.gif" lazyload></li>
<li> 配置UserMapper.xml<img src="https://img-blog.csdnimg.cn/1abb4415bcdd465a8fc7db301dbb6f74.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload>6.  测试结果<br><img src="https://img-blog.csdnimg.cn/e0c8ebb538c84239b25a876e166f8a6a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="知识小结-5"><a href="#知识小结-5" class="headerlink" title="知识小结"></a>知识小结</h3>MyBatis多表配置方式：<br>一对一配置：使用 &lt; resultMap &gt; 做配置<br>一对多配置：使用&lt; resultMap &gt; + &lt; collection &gt;做配置<br>多对多配置：使用&lt; resultMap &gt; + &lt; collection &gt;做配置<h2 id="Mybatis注解开发"><a href="#Mybatis注解开发" class="headerlink" title="Mybatis注解开发"></a>Mybatis注解开发</h2><h3 id="常用注解"><a href="#常用注解" class="headerlink" title="常用注解"></a>常用注解</h3>这几年来注解开发越来越流行，Mybatis也可以使用注解开发方式，这样我们就可以减少编写Mapper<br>映射文件了。我们先围绕一些基本的CRUD来学习，再学习复杂映射多表操作。</li>
</ol>
<p>@Insert：实现新增<br>@Update：实现更新<br>@Delete：实现删除<br>@Select：实现查询<br>@Result：实现结果集封装<br>@Results：可以与@Result 一起使用，封装多个结果集<br>@One：实现一对一结果集封装<br>@Many：实现一对多结果集封装</p>
<h3 id="MyBatis的增删改查"><a href="#MyBatis的增删改查" class="headerlink" title="MyBatis的增删改查"></a>MyBatis的增删改查</h3><p>我们完成简单的user表的增删改查的操作<br><img src="https://img-blog.csdnimg.cn/9481606329ca45c1a3a678b0ece92d43.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/a911324b4fb845678cd25b69a6913ff7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/1efa92bdab904438b1c6a474abd28630.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br>修改MyBatis的核心配置文件，我们使用了注解替代的映射文件，所以我们只需要加载使用了注解的Mapper接口即可<img src="https://img-blog.csdnimg.cn/a36cd22878694de884820c5894ccb27c.png" srcset="/img/newloading.gif" lazyload><br>或者指定扫描包含映射关系的接口所在的包也可以<img src="https://img-blog.csdnimg.cn/fd377d801b00491a8d53aad562367062.png" srcset="/img/newloading.gif" lazyload></p>
<h3 id="MyBatis的注解实现复杂映射开发"><a href="#MyBatis的注解实现复杂映射开发" class="headerlink" title="MyBatis的注解实现复杂映射开发"></a>MyBatis的注解实现复杂映射开发</h3><p>实现复杂关系映射之前我们可以在映射文件中通过配置<resultMap>来实现，使用注解开发后，我们可以使用@Results注解，@Result注解，@One注解，@Many注解组合完成复杂关系的配置<img src="https://img-blog.csdnimg.cn/0335c8ed633348d3b3b7732c2f145198.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><br><img src="https://img-blog.csdnimg.cn/5482d132aefc4e94a9ce341c12c09720.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></p>
<h3 id="一对一查询-1"><a href="#一对一查询-1" class="headerlink" title="一对一查询"></a>一对一查询</h3><ol>
<li>一对一查询的模型<br>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户<br>一对一查询的需求：查询一个订单，与此同时查询出该订单所属的用户<img src="https://img-blog.csdnimg.cn/081a29ea48b14dc792109fea857fc698.png" srcset="/img/newloading.gif" lazyload></li>
<li>一对一查询的语句<br>对应的sql语句：<br> select * from orders;<br> select * from user where id=查询出订单的uid;<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/6f3bdc24f77441209e2b41f7b9bca5c7.png" srcset="/img/newloading.gif" lazyload></li>
<li>创建Order和User实体<img src="https://img-blog.csdnimg.cn/ffce0836056b4b91a93f4fe52fdc0a3a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_19,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>创建OrderMapper接口<br><img src="https://img-blog.csdnimg.cn/ead61cec330240df96727bd60a3c490b.png" srcset="/img/newloading.gif" lazyload></li>
<li>使用注解配置Mapper<br><img src="https://img-blog.csdnimg.cn/61a2d2ed5a124e8ebfd0e32395964895.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>测试结果<br><img src="https://img-blog.csdnimg.cn/a5cdf7b707c34729a1b0a0abdbed0740.png" srcset="/img/newloading.gif" lazyload><h3 id="一对多查询-1"><a href="#一对多查询-1" class="headerlink" title="一对多查询"></a>一对多查询</h3></li>
<li>一对多查询的模型<br>用户表和订单表的关系为，一个用户有多个订单，一个订单只从属于一个用户<br>一对多查询的需求：查询一个用户，与此同时查询出该用户具有的订单<img src="https://img-blog.csdnimg.cn/dcb974cd7cdf4503923ce7108df14b97.png" srcset="/img/newloading.gif" lazyload></li>
<li>一对多查询的语句<br>对应的sql语句：<br> select * from user;<br> select * from orders where uid=查询出用户的id;<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/7248fb5f424540058d5b26cc623c1aa7.png" srcset="/img/newloading.gif" lazyload></li>
<li>修改User实体<br><img src="https://img-blog.csdnimg.cn/0dd5a78fabda4f68b4c32342fd29321c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li>创建UserMapper接口<br><img src="https://img-blog.csdnimg.cn/ee9f2624473b4651bbf382784556080c.png" srcset="/img/newloading.gif" lazyload></li>
<li> 使用注解配置Mapper<img src="https://img-blog.csdnimg.cn/2ee2a3b29fb7443c93be52c59070a0ac.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 测试结果<img src="https://img-blog.csdnimg.cn/f9e6747f5fda474f9af72e3fd1c2153c.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload><h3 id="多对多查询-1"><a href="#多对多查询-1" class="headerlink" title="多对多查询"></a>多对多查询</h3></li>
<li>多对多查询的模型<br>用户表和角色表的关系为，一个用户有多个角色，一个角色被多个用户使用<br>多对多查询的需求：查询用户同时查询出该用户的所有角色<img src="https://img-blog.csdnimg.cn/9ca29a1f088945e3955650791d152e65.png" srcset="/img/newloading.gif" lazyload></li>
<li>多对多查询的语句<br>对应的sql语句：<br> select * from user;<br> select * from role r,user_role ur where r.id=ur.role_id and ur.user_id=用户的id<br>查询的结果如下：<img src="https://img-blog.csdnimg.cn/c5be8d6050ab425980e9acab7a13368a.png" srcset="/img/newloading.gif" lazyload></li>
<li> 创建Role实体，修改User实体<img src="https://img-blog.csdnimg.cn/c99aaadbf66346098e5c20fc7b10118a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 添加UserMapper接口方法<img src="https://img-blog.csdnimg.cn/fa5fdbafd71247a7b05640bc16e4dd36.png" srcset="/img/newloading.gif" lazyload></li>
<li> 使用注解配置Mapper<img src="https://img-blog.csdnimg.cn/81e3e446872148e5a5126d122895a1aa.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
<li> 测试结果<img src="https://img-blog.csdnimg.cn/092b7e2fbcae454da6ed1cad3015f72b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBATWVyY3VyeTIuIDA=,size_20,color_FFFFFF,t_70,g_se,x_16" srcset="/img/newloading.gif" lazyload></li>
</ol>
<h2>至此为全部的SSM笔记.</h2>
              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Framework/" class="category-chain-item">Framework</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/spring/">#spring</a>
      
        <a href="/tags/mybatis/">#mybatis</a>
      
        <a href="/tags/springMVC/">#springMVC</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>SSM</div>
      <div>http://example.com/2021/07/15/SSM/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Mercury</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年7月15日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/09/01/JavaSE/" title="JavaSE">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">JavaSE</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>






  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.0/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>

  <!-- 樱花特效 -->
  <script type="text/javascript">
    var windowWidth = $(window).width();
    if (windowWidth > 480) {
      document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
    }
  </script>

</body>
</html>
